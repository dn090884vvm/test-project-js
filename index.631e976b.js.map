{"mappings":"AAAA,MAAMA,EAAO,CACXC,UAAWC,SAASC,cAAc,gBAClCC,WAAYF,SAASC,cAAc,SACnCE,aAAcH,SAASC,cAAc,UACrCG,aAAcJ,SAASC,cAAc,YACrCI,gBAAiBL,SAASC,cAAc,cACxCK,UAAWN,SAASC,cAAc,WAClCM,cAAeP,SAASC,cAAc,eACtCO,UAAWR,SAASC,cAAc,aAClCQ,WAAYT,SAASC,cAAc,UAIrC,IAAIS,EAAY,EACZC,EAAc,EAkClBC,eAAeC,IACb,MAAMC,QA1BRF,iBACE,IAAIG,EAAO,GACX,IACE,MAAMC,QAAiBC,MAErB,+FAAyEN,KAa3EI,QAV2BC,EAASE,OAWpC,MAAOC,GACPC,QAAQC,IAAIF,GAEd,OAAOJ,EAIcO,GACrBF,QAAQC,IAAIP,GACZM,QAAQC,IAAIP,EAAOS,SACnBzB,EAAKQ,UAAUkB,UAAYV,EAAOS,QAC/BE,KAAIC,GAQT,SAA2BA,GACzB,MAAO,qEAzCQ,mCA0CwBA,EAAMC,mDAV7BC,CAAkBF,KAC/BG,KAAK,IAER/B,EAAKS,cAAciB,UAAYM,IAC5BL,KAAIM,GAAQ,gCAAgCA,MAASA,eACrDF,KAAK,IASV,SAASC,IACP,MAAME,EAAQ,GACd,IAAK,IAAIC,EAAIvB,EAAWuB,EAAIvB,EAtDL,GAsDmCuB,GAAK,EAC7DD,EAAME,KAAKD,EAAI,GAIjB,OAAOD,EArDTG,eAAiB,mCAgEjBrC,EAAKC,UAAUqC,iBAAiB,UARhC,SAAaC,GACXA,EAAMC,iBACNzB,IACAf,EAAKU,UAAU+B,UAAUC,OAAO,UAChC1C,EAAKW,WAAW8B,UAAUC,OAAO,UACjCpB,QAAQC,IAAIgB,EAAMI,cAAcC,SAASC,YAAYC,UAIvD9C,EAAKS,cAAc6B,iBAAiB,SAEpC,SAAoBC,GAGlBA,EAAMC,iBACNlB,QAAQC,IAAIgB,EAAMQ,OAAOD,OACzBjC,EAAcmC,OAAOT,EAAMQ,OAAOD,OAElC/B,IAIEF,EADEA,EAAc,IAAO,EACTA,EAAc,GAAK,EAEnBoC,KAAKC,MAAMrC,EAAeA,EAAc,GAAM,GAE9DS,QAAQC,IAAIV,MAGdb,EAAKW,WAAW2B,iBAAiB,SAGjC,WAEEzB,GAAe,GACfD,GAAa,GACbU,QAAQC,IAAI,gBAAiBV,GAC7BS,QAAQC,IAAI,cAAeX,GAC3BoB,IACAjB,OATFf,EAAKU,UAAU4B,iBAAiB,SAYhC,WAKE,GAFA1B,GAAa,GACbU,QAAQC,IAAI,cAAeX,GACvBA,EAAY,EAGd,YAFAA,EAAY,GAIdC,GAAe,GACfS,QAAQC,IAAI,gBAAiBV,GAC7BmB,IACAjB","sources":["src/index.js"],"sourcesContent":["const refs = {\n  inputForm: document.querySelector('#search-form'),\n  inputField: document.querySelector('input'),\n  searchButton: document.querySelector('button'),\n  galleryItems: document.querySelector('.gallery'),\n  continuouButton: document.querySelector('.load-more'),\n  moviesDiv: document.querySelector('#movies'),\n  paginationDiv: document.querySelector('#pagination'),\n  preButton: document.querySelector('.previous'),\n  nextButton: document.querySelector('.next'),\n\n  //   paginationForm: document.querySelector('.pagination-form'),\n};\nlet startPage = 0;\nlet currentPage = 1;\nconst PAGINATION_PAGES = 10;\n// console.log(refs.moviesDiv);\nconst API_BASE_URL = 'https://api.themoviedb.org/3/';\n// https://api.themoviedb.org/3/trending/all/day?api_key=<<api_key>>\n\nconst API_KEY = '06cf6ee022a0922eb5200ae030143d7b';\nIMAGE_BASE_URL = 'https://image.tmdb.org/t/p/w1280';\n\nasync function getPopularMovies() {\n  let data = [];\n  try {\n    const response = await fetch(\n      //   `${API_BASE_URL}movie/popular?api_key=${API_KEY}&page=${page}`\n      `https://api.themoviedb.org/3/trending/all/day?api_key=${API_KEY}&page=${currentPage}`\n    );\n\n    const responseData = await response.json();\n    // console.log(\n    //   'total pages=',\n    //   responseData.total_pages,\n    //   'total result=',\n    //   responseData.total_results\n    // );\n    // console.log(responseData);\n    //   data = responseData?.results;\n    // data = responseData.results;\n    data = responseData;\n  } catch (error) {\n    console.log(error);\n  }\n  return data;\n}\n\nasync function renderMovies() {\n  const movies = await getPopularMovies();\n  console.log(movies);\n  console.log(movies.results);\n  refs.moviesDiv.innerHTML = movies.results\n    .map(movie => renderSingleMovie(movie))\n    .join('');\n  // console.log(renderPaginationPages());\n  refs.paginationDiv.innerHTML = renderPaginationPages()\n    .map(page => `<button type='submit' value='${page}'>${page}</button>`)\n    .join('');\n}\n\nfunction renderSingleMovie(movie) {\n  return ` <div class=\"col-4 col-lg-3 col-xl-2 p-1\">\n            <img src=\"${IMAGE_BASE_URL + movie.poster_path}\" class=\"img-fluid\" >\n        </div>`;\n}\n\nfunction renderPaginationPages() {\n  const array = [];\n  for (let i = startPage; i < startPage + PAGINATION_PAGES; i += 1) {\n    array.push(i + 1);\n    // console.log(array);\n  }\n  //   console.log(array);\n  return array;\n}\n// IMAGE_BASE_URL + movie?.poster_path;\nfunction App(event) {\n  event.preventDefault();\n  renderMovies();\n  refs.preButton.classList.remove('hidden');\n  refs.nextButton.classList.remove('hidden');\n  console.log(event.currentTarget.elements.searchQuery.value);\n}\n// App();\nrefs.inputForm.addEventListener('submit', App);\nrefs.paginationDiv.addEventListener('click', changePage);\n\nfunction changePage(event) {\n  //   console.log(event.target[2].value);\n\n  event.preventDefault();\n  console.log(event.target.value);\n  currentPage = Number(event.target.value);\n\n  renderMovies(currentPage);\n  //   return Number(currentPage);\n\n  if (currentPage % 10 === 0) {\n    currentPage = currentPage - 10 + 1;\n  } else {\n    currentPage = Math.floor(currentPage - (currentPage % 10) + 1);\n  }\n  console.log(currentPage);\n}\n\nrefs.nextButton.addEventListener('click', nextPages);\nrefs.preButton.addEventListener('click', prePages);\n\nfunction nextPages() {\n  //   console.log(currentPage);\n  currentPage += 10;\n  startPage += 10;\n  console.log('current page=', currentPage);\n  console.log('start page=', startPage);\n  renderPaginationPages(startPage);\n  renderMovies(currentPage);\n}\n\nfunction prePages() {\n  //   console.log('current', currentPage);\n  //   console.log('start', startPage);\n  startPage -= 10;\n  console.log('start page=', startPage);\n  if (startPage < 0) {\n    startPage = 0;\n    // console.log('error');\n    return;\n  }\n  currentPage -= 10;\n  console.log('current page=', currentPage);\n  renderPaginationPages(startPage);\n  renderMovies(currentPage);\n}\n// function showImages(event) {\n//   gettingImages(event);\n// }\n\n// function gettingImages(event) {\n//   event.preventDefault();\n\n//   const requestValue = refs.inputField.value;\n\n//   getDatas()\n//     .then(response => {\n//       receivedDatas(response);\n//     })\n//     .catch(error => console.log(error.message));\n// }\n"],"names":["$1f0dc3b9307be026$var$refs","inputForm","document","querySelector","inputField","searchButton","galleryItems","continuouButton","moviesDiv","paginationDiv","preButton","nextButton","$1f0dc3b9307be026$var$startPage","$1f0dc3b9307be026$var$currentPage","async","$1f0dc3b9307be026$var$renderMovies","movies","data","response","fetch","json","error","console","log","$1f0dc3b9307be026$var$getPopularMovies","results","innerHTML","map","movie","poster_path","$1f0dc3b9307be026$var$renderSingleMovie","join","$1f0dc3b9307be026$var$renderPaginationPages","page","array","i","push","IMAGE_BASE_URL","addEventListener","event","preventDefault","classList","remove","currentTarget","elements","searchQuery","value","target","Number","Math","floor"],"version":3,"file":"index.631e976b.js.map"}